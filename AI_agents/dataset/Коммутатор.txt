# Определения
- Что такое VLAN 
- Что такое Access port
- Что такое Trunk port
- Что такое Port Security
- Что такое VTP
- Что такое STP
- Что такое дуплекс 
- Что такое MAC-адрес 
- Что такое VLAN Hopping
- Что такое Broadcast Storm
- Что такое IEEE 802.1Q
- Что такое Inter-VLAN Routing
- Что такое CAM Table 
- Что такое STP 
- Что такое Port Security Violation
- Что такое VLAN Access Control
- Что такое EtherChannel
- Что такое Trunk Negotiation
- Что такое CAM Table Overflow
- Что такое VLAN Membership Policy Server 
- Что такое QoS 
- Что такое MAC Flooding
- Что такое VLAN Trunking

# Ответы определения
- VLAN (Virtual Local Area Network): это метод разделения сети на логические группы устройств, которые могут обмениваться данными, как если бы они находились в одной физической сети, но на самом деле могут быть физически разделены на разных коммутаторах. VLAN используются для улучшения безопасности, масштабируемости и управляемости сетей, а также для оптимизации трафика и повышения производительности.
- Access port: это порт коммутатора, который настроен для принадлежности к одному конкретному VLAN. Он предназначен для подключения конечных устройств, таких как компьютеры, принтеры или IP-телефоны, к сети. Трафик, проходящий через access port, принадлежит только одному VLAN, который указан в конфигурации порта. Access порты не транслируют теги VLAN в трафике и обычно используются на периферийных устройствах сети.
- Trunk port:  это порт коммутатора, который способен передавать данные между несколькими VLAN. Он используется для соединения между коммутаторами или между коммутатором и маршрутизатором. Трафик, проходящий через trunk port, содержит теги VLAN, что позволяет коммутаторам отличать различные VLAN и правильно направлять данные. Таким образом, trunk порты позволяют передавать трафик нескольких VLAN по одному физическому интерфейсу, что повышает эффективность использования сетевых ресурсов.
- Port Security: это механизм настройки безопасности на коммутаторе, который позволяет контролировать доступ к сети посредством ограничения числа устройств, которые могут быть подключены к порту. Это может включать ограничение количества MAC-адресов, разрешенных на порту, или блокировку порта при обнаружении нежелательной активности.
- VLAN Trunking Protocol (VTP): это протокол, используемый для автоматической синхронизации информации о VLAN между коммутаторами в сети. VTP позволяет управлять созданием, изменением и удалением VLAN на одном коммутаторе и автоматически распространять эти изменения на другие коммутаторы в сети.
- Spanning Tree Protocol (STP): это протокол, используемый для предотвращения петель в сетях Ethernet. STP обеспечивает избыточность в сети, блокируя некоторые порты на коммутаторах, чтобы предотвратить возможность циклических путей в сети.
- Дуплекс (Duplex): это режим работы сетевого устройства, который определяет, может ли устройство одновременно отправлять и принимать данные на сетевом интерфейсе. Полный дуплекс позволяет устройству выполнять обе функции одновременно, в то время как полудуплекс позволяет только одному устройству отправлять или принимать данные в определенный момент времени.
- MAC-адрес (Media Access Control): это уникальный идентификатор, присвоенный сетевому интерфейсу для его идентификации в сети. Каждое сетевое устройство, такое как компьютер, маршрутизатор или коммутатор, имеет свой собственный MAC-адрес, который используется для маршрутизации и доставки данных в сети.
- VLAN Hopping: это метод атаки на сети, который использует уязвимости в конфигурации коммутаторов для получения несанкционированного доступа к данным в разных VLAN. Атакующий может использовать манипуляции с тегами VLAN или портами коммутатора, чтобы пересекать границы VLAN и получить доступ к данным, к которым у него нет прав доступа.
- Broadcast Storm:  это ситуация в сети Ethernet, когда слишком много широковещательных пакетов создается и распространяется по сети, что приводит к перегрузке сетевых ресурсов и снижению производительности. Broadcast Storm может возникнуть из-за петель в сети, неправильной конфигурации или вирусных атак.
- IEEE 802.1Q: это стандарт протокола виртуальных локальных сетей (VLAN), который определяет способ маркировки кадров Ethernet с тегами VLAN. Этот стандарт позволяет коммутаторам и другим сетевым устройствам понимать и обрабатывать трафик для различных VLAN на одном физическом интерфейсе.
- Inter-VLAN Routing: это процесс маршрутизации трафика между различными виртуальными локальными сетями (VLAN) в одной сети. Этот процесс обеспечивает возможность обмена данными между устройствами, находящимися в разных VLAN, путем использования маршрутизатора или многоуровневого коммутатора.
- CAM Table (Content Addressable Memory Table): это таблица, используемая коммутаторами Ethernet для хранения информации о соответствии MAC-адресов и портов коммутатора. CAM таблица позволяет коммутаторам эффективно пересылать кадры к определенным портам на основе их MAC-адресов.
- STP (Spanning Tree Protocol): это протокол, используемый для предотвращения петель в сетях Ethernet. STP обеспечивает избыточность в сети, блокируя некоторые порты на коммутаторах, чтобы предотвратить возможность циклических путей в сети.
- Port Security Violation: это событие, которое происходит, когда на коммутаторе обнаруживается нежелательная активность на порте, настроенном с параметрами безопасности порта. Это может включать в себя подключение устройства с неправильным MAC-адресом или попытку доступа к запрещенным ресурсам.
- VLAN Access Control: это метод управления доступом к сети путем присвоения пользователям определенных VLAN в зависимости от их идентификации или других параметров. Это позволяет ограничивать доступ пользователей к определенным ресурсам в сети на основе их принадлежности к определенным VLAN.
- EtherChannel: это технология объединения нескольких сетевых интерфейсов в один логический канал, что увеличивает пропускную способность и надежность соединения. Эта технология позволяет использовать несколько физических соединений между коммутаторами или маршрутизаторами как единый логический канал для передачи данных.
- Trunk Negotiation:  это процесс, при котором сетевые устройства, такие как коммутаторы, договариваются о параметрах соединения между ними, когда устанавливается транк (логическое соединение, способное передавать данные для нескольких VLAN). В ходе этого процесса устройства определяют параметры, такие как разрешенные идентификаторы VLAN, режим работы транка (например, ISL или 802.1Q) и другие характеристики соединения.
- CAM Table Overflow: это ситуация, когда в таблице CAM (Content Addressable Memory Table) коммутатора заканчивается место для хранения MAC-адресов и портов, что приводит к потере данных и нарушению работы коммутационного устройства. Это может произойти в результате атаки или неправильной настройки сети.
- VLAN Membership Policy Server (VMPS): это сервер, который управляет и назначает членство в виртуальных локальных сетях (VLAN) для устройств в сети. Этот сервер обычно используется для автоматизации процесса назначения VLAN на основе определенных правил или условий, что облегчает администрирование сети.
- QoS (Quality of Service): это механизм, используемый для управления и обеспечения приоритета трафика в сети, чтобы гарантировать определенное качество обслуживания для различных типов данных или услуг. QoS позволяет определить приоритеты и уровни обслуживания для различных видов трафика в зависимости от их значимости и требований к производительности сети.
- MAC Flooding: это вид атаки на коммутаторы Ethernet, при котором злоумышленник создает большое количество фальшивых MAC-адресов и отправляет их на коммутатор, чтобы переполнить его CAM таблицу. Это может привести к тому, что коммутатор начнет транслировать весь трафик на всех портах, что может быть использовано для перехвата данных или нарушения работы сети.
- VLAN Trunking: это метод передачи данных между коммутаторами или маршрутизаторами с использованием транков (логических соединений, способных передавать данные для нескольких VLAN). VLAN Trunking позволяет эффективно передавать трафик между различными VLAN и обеспечивать изоляцию трафика в сети.

# Вопросы по настройке
- Как создать новый VLAN на коммутаторе?
- Как настроить порт в режиме access на коммутаторе?
- Как настроить порт в режиме trunk на коммутаторе?
- Как настроить максимальное количество MAC-адресов для порта коммутатора?
- Как настроить механизм безопасности порта на коммутаторе для ограничения доступа по MAC-адресу?
- Как настроить VLAN Trunking Protocol (VTP) на коммутаторе?
- Как настроить Spanning Tree Protocol (STP) на коммутаторе?
- Как настроить режим работы дуплекса на порту коммутатора?
- Как добавить статический MAC-адрес в таблицу коммутатора?
- Как настроить IEEE 802.1Q на порту коммутатора?
- Как настроить Inter-VLAN Routing на маршрутизаторе?
- Как настроить VLAN Hopping Protection на коммутаторе?
- Как настроить ограничение трафика на порту коммутатора?
- Как настроить STP на коммутаторе для предотвращения петель в сети?
- Как настроить механизм безопасности портов на коммутаторе для обнаружения нарушений безопасности?
- Как настроить доступ к определенным VLAN на портах коммутатора?
- Как настроить EtherChannel на коммутаторе для объединения нескольких портов в один логический интерфейс?
- Как настроить автоматическое определение режима работы порта в режиме trunk на коммутаторе?
- Как предотвратить переполнение CAM-таблицы на коммутаторе?
- Как настроить VMPS на коммутаторе для автоматического определения VLAN на портах?
- Как настроить QoS на коммутаторе для управления качеством обслуживания в сети?
- Как защитить коммутатор от атаки MAC Flooding?
- Как настроить VLAN Trunking на коммутаторе для передачи данных между VLAN?
- Что делает команда configure terminal?
- Что происходит при выполнении команды interface [номер порта]?
- Какой режим устанавливается командой switchport mode access?
- Какая информация отображается при использовании команды show interfaces switchport?
- Для чего используется команда spanning-tree portfast?
- Какая команда применяется для настройки виртуального LAN (VLAN)?
- Как создать VLAN с номером 10 на коммутаторе?
- Что делает команда vlan [номер VLAN] в режиме конфигурации интерфейса?
- Какие команды используются для просмотра MAC-адресов, установленных на портах коммутатора?
- Как узнать статус и скорость работы порта на коммутаторе?
- Какая команда используется для отключения неиспользуемых портов на коммутаторе?
- Что делает команда shutdown в режиме конфигурации интерфейса?
- Какие команды используются для настройки динамического протокола VLAN (VTP)?
- Как узнать информацию о текущих настройках VLAN на коммутаторе?
- Как добавить порт в VLAN на коммутаторе?
- Что делает команда configure terminal?
- Что делает команда interface?
- Что делает команда switchport mode access?
- Что делает команда switchport access vlan?
- Что делает команда show interfaces switchport?
- Что делает команда spanning-tree portfast?
- Что делает команда show vlan?
- Что делает команда vlan?
- Что делает команда ip default-gateway?
- Что делает команда no shutdown?
- Что делает команда shutdown?
- Что делает команда ip address?
- Что делает команда show interface status?
- Что делает команда show mac address-table?
- Что делает команда clear mac address-table?


# Ответы для настройки
- Создание нового VLAN выполняется с помощью команды "vlan".  Войдите в конфигурационный режим коммутатора.  Используйте команду vlan <vlan_id> для создания нового VLAN с указанным идентификатором.  Дополнительно можно настроить имя для VLAN с помощью команды name <vlan_name>.  Введите exit
- Настройка порта в режиме access осуществляется через интерфейс командной строки (CLI) с помощью команды "switchport mode access".  Войдите в конфигурационный режим интерфейса коммутатора.  Используйте команду switchport mode access для настройки порта в режиме access. Опционально, можно указать номер VLAN для данного порта с помощью команды switchport access vlan <vlan_id>. Завершите конфигурацию и сохраните изменения.
- Настройка порта в режиме trunk происходит с помощью команды "switchport mode trunk".  Войдите в конфигурационный режим интерфейса коммутатора.  Используйте команду switchport mode trunk для настройки порта в режиме trunk. Опционально, можно настроить разрешенные VLAN для данного порта с помощью команды switchport trunk allowed vlan <vlan_list>.
- Максимальное количество MAC-адресов на порту можно настроить с помощью команды "switchport port-security maximum [максимальное количество]".
- Механизм безопасности порта настраивается с помощью команды "switchport port-security". Для настройки механизма безопасности порта на коммутаторе используйте команды switchport port-security для включения функции безопасности порта, а затем switchport port-security mac-address <mac_address> для добавления разрешенных MAC-адресов на порт.
- Настройка VLAN Trunking Protocol (VTP) производится с помощью команды "vtp mode". Для настройки протокола VTP на коммутаторе используйте команды vtp mode <mode> для выбора режима работы (например, server, client, transparent), а затем vtp domain <domain_name> для указания домена VTP.
- Spanning Tree Protocol (STP) настраивается с помощью команды "spanning-tree mode". Для настройки STP на коммутаторе используйте команду spanning-tree <mode>, где <mode> может быть различными режимами STP, такими как PVST (Per-VLAN Spanning Tree), RSTP (Rapid Spanning Tree Protocol) или MSTP (Multiple Spanning Tree Protocol).
- Режим работы дуплекса на порту настраивается с помощью команды "duplex". Для настройки режима работы дуплекса на порту коммутатора используйте команду duplex <mode>, где <mode> может быть auto (автоматический режим), full (полный дуплекс) или half (полудуплекс).
- Добавление статического MAC-адреса производится с помощью команды "mac-address-table static".  Войдите в конфигурационный режим интерфейса коммутатора.  Используйте команду mac-address-table static <MAC_address> vlan <vlan_id> interface <interface> для добавления статического MAC-адреса в таблицу коммутатора.
- Настройка IEEE 802.1Q на порту производится с помощью команды "switchport mode trunk".
- Настройка Inter-VLAN Routing производится на маршрутизаторе с помощью команды "interface vlan".  Создайте виртуальные интерфейсы для каждого VLAN на маршрутизаторе.  Назначьте каждому виртуальному интерфейсу IP-адрес, который будет использоваться в качестве шлюза по умолчанию для устройств в этом VLAN.  Включите маршрутизацию на маршрутизаторе.  Добавьте маршруты между виртуальными интерфейсами для обеспечения связности между VLAN.
- Защита от VLAN Hopping настраивается с помощью команды "port-security vlan-hopping".  Отключите ненужные VLAN на портах, которые не должны быть доступны с внешних сетей.  Используйте VLAN Access Control Lists (VACLs) для ограничения доступа к VLAN на основе IP-адресов.  Включите режим порта Host для всех портов, которые не поддерживают IEEE 802.1Q.  Настройте Port Security для ограничения доступа к портам на основе MAC-адресов.
- Ограничение трафика на порту коммутатора настраивается с помощью команды "switchport port-security". Для настройки ограничения трафика на порту коммутатора используйте команды switchport port-security для включения функции безопасности порта и switchport port-security maximum <max_addresses> для ограничения количества разрешенных MAC-адресов на порту.
- STP настраивается с помощью команды "spanning-tree mode [режим]" на коммутаторе. Для настройки STP на коммутаторе используйте команду spanning-tree mode <mode>, где <mode> может быть различными режимами STP, такими как PVST (Per-VLAN Spanning Tree), RSTP (Rapid Spanning Tree Protocol) или MSTP (Multiple Spanning Tree Protocol).
- Механизм безопасности портов настраивается с помощью команды "switchport port-security" на коммутаторе. Для настройки механизма безопасности портов на коммутаторе для обнаружения нарушений безопасности используйте команду switchport port-security violation <mode>, где <mode> может быть protect (безопасный режим), restrict (ограниченный режим) или shutdown (режим автоматического отключения).
- Доступ к VLAN на портах настраивается с помощью команды "switchport mode access" и "switchport access vlan [номер_VLAN]". Для настройки доступа к определенным VLAN на портах коммутатора используйте команду switchport access vlan <vlan_id> в конфигурационном режиме интерфейса, где <vlan_id> это номер VLAN, к которому должен быть доступ на этом порту.
- EtherChannel настраивается с помощью команды "channel-group [номер_группы] mode [режим]" на коммутаторе.  Выберите порты, которые вы хотите объединить в логический интерфейс.  Войдите в конфигурационный режим интерфейса и используйте команду channel-group <number> mode <mode>, где <number> номер группы каналов, а <mode> режим работы EtherChannel (например, active для режима LACP или on для режима static).
- Автоматическое определение режима работы порта в режиме trunk настраивается с помощью команды "switchport mode trunk" на коммутаторе. Для настройки автоматического определения режима работы порта в режиме trunk на коммутаторе используйте команду switchport mode dynamic auto в конфигурационном режиме интерфейса. При такой настройке порт будет автоматически переключаться в режим trunk, если соседний порт на другом устройстве установлен в режим trunk.
- Переполнение CAM-таблицы предотвращается с помощью настройки функции Port Security и фильтрации ненужного трафика. Для предотвращения переполнения CAM-таблицы на коммутаторе можно использовать следующие методы:  Включить Port Security для ограничения количества MAC-адресов на порту.  Использовать статические записи MAC-адресов в таблице коммутатора.  Ограничить количество динамических записей MAC-адресов в таблице с помощью команды mac-address-table limit <value>.
- VMPS настраивается с помощью команды "vmps server" и указания IP-адреса источника на коммутаторе. Настройте коммутатор для использования сервера VMPS с помощью команды vmps server <ip_address> в глобальном режиме конфигурации
- QoS настраивается с помощью команды "mls qos" и определения параметров приоритета трафика на коммутаторе.  Определите классы обслуживания (CoS, DSCP).  Настройте соответствующие очереди (priority queue, custom queue). Присвойте классам обслуживания соответствующие приоритеты и очереди с помощью команды mls qos <command> в глобальном режиме конфигурации.
- Атака MAC Flooding предотвращается с помощью настройки функции Port Security и ограничения количества MAC-адресов на порту.  Включите Port Security для ограничения количества допустимых MAC-адресов на порту. Используйте функцию MAC Address Notification (MAN) для оповещения о необычных событиях, связанных с MAC-адресами.  Включите функцию Storm Control для контроля уровня многоадресного и широковещательного трафика.
- VLAN Trunking настраивается с помощью команды "switchport mode trunk" и указания разрешенных VLAN на коммутаторе.  Войдите в конфигурационный режим интерфейса и используйте команду switchport mode trunk. Укажите разрешенные VLAN для транк-порта с помощью команды switchport trunk allowed vlan <vlan_list>. Убедитесь, что порт настроен на правильный VLAN и что его состояние trunking.
- Команда configure terminal позволяет перейти в режим глобальной конфигурации коммутатора.
- Команда interface [номер порта] позволяет перейти в режим конфигурации указанного порта на коммутаторе.
- Команда switchport mode access устанавливает порт коммутатора в режим доступа.
- Команда show interfaces switchport отображает информацию о настройках портов коммутатора, включая режим и VLAN.
- Команда spanning-tree portfast активирует режим PortFast на порту коммутатора, ускоряя процесс перевода порта в состояние Forwarding.
- Для создания VLAN на коммутаторе используется команда vlan [номер VLAN].
- Для создания VLAN с номером 10 на коммутаторе используется команда vlan 10.
- Команда vlan [номер VLAN] в режиме конфигурации интерфейса устанавливает VLAN для указанного порта.
- Для просмотра MAC-адресов на портах коммутатора используются команды show mac-address-table или show interfaces.
- Информацию о статусе и скорости работы порта можно получить с помощью команды show interfaces status.
- Для отключения неиспользуемых портов на коммутаторе используется команда shutdown в режиме конфигурации интерфейса.
- Команда shutdown в режиме конфигурации интерфейса выключает указанный порт.
- Для настройки динамического протокола VLAN (VTP) используются команды vtp mode [mode] и vtp domain [domain_name].
- Информацию о текущих настройках VLAN на коммутаторе можно узнать с помощью команды show vlan.
- Чтобы добавить порт в VLAN на коммутаторе, используется команда switchport access vlan [номер VLAN].
- Команда configure terminal позволяет перейти в режим глобальной конфигурации.
- Команда interface [номер порта] позволяет перейти в режим конфигурации интерфейса.
- Команда switchport mode access настраивает порт коммутатора в режим доступа.
- Команда switchport access vlan [номер VLAN] устанавливает VLAN для порта.
- Команда show interfaces switchport отображает информацию о настройках портов коммутатора.
- Команда spanning-tree portfast активирует режим PortFast на порту коммутатора.
- Команда show vlan отображает информацию о настройках VLAN на коммутаторе.
- Команда vlan [номер VLAN] позволяет создать новый VLAN.
- Команда ip default-gateway [адрес шлюза] устанавливает шлюз по умолчанию.
- Команда no shutdown включает интерфейс.
- Команда shutdown выключает интерфейс.
- Команда ip address [IP-адрес] [Маска подсети] назначает IP-адрес интерфейсу.
- Команда show interface status отображает статус всех интерфейсов.
- Команда show mac address-table отображает таблицу MAC-адресов.
- Команда clear mac address-table очищает таблицу MAC-адресов.



# Возможные ситуации 
- Невозможность передачи данных между VLAN.
- Ошибка при настройке trunk-порта.
- Неисправность порта коммутатора.
- Перегрузка коммутатора из-за большого количества широковещательного трафика.
- Коллизии на портах коммутатора.
- Несанкционированный доступ к сети через коммутатор.
- Перегрузка CAM-таблицы коммутатора.
- Петли в сети, вызванные нестабильной работой STP.
- Нарушения безопасности портов из-за подключения несанкционированных устройств.
- Перегрузка CAM-таблицы из-за большого количества MAC-адресов.
- Недоступность VLAN из-за неправильной конфигурации VLAN Trunking.
- Нарушения безопасности VLAN из-за несанкционированного доступа.
- Высокая задержка на портах коммутатора из-за перегрузки трафика.
- Нарушения безопасности из-за атаки MAC Flooding.
- Отказ в работе VLAN после добавления новых портов на коммутаторе.
- Недоступность сетевых сервисов из-за неправильной конфигурации EtherChannel.
- Ошибка в работе VMPS, вызванная неправильной конфигурацией сервера.

# Пути их решения
- Проверьте конфигурацию маршрутизатора, связанного с коммутатором, и убедитесь, что маршрутизация между VLAN настроена правильно.
- Проверьте, что VLAN, разрешенные на trunk-порту, настроены правильно с помощью команды "switchport trunk allowed vlan".
- Проверьте состояние порта с помощью команды "show interface" и перезагрузите порт при необходимости.
- Настройте механизм ограничения широковещательного трафика с помощью команды "storm-control".
- Используйте команду "show interface" для выявления коллизий и настройте дуплекс и скорость соответствующим образом.
- Настройте механизм безопасности порта с помощью команды "port-security" и ограничьте доступ к порту только по известным MAC-адресам.
- Увеличьте размер CAM-таблицы с помощью команды "mac-address-table".
- Проверьте конфигурацию STP на всех коммутаторах и убедитесь, что они правильно настроены и соединены.
- Настройте механизм безопасности портов на коммутаторах, такой как Port Security, чтобы ограничить доступ к портам.
- Увеличьте размер CAM-таблицы на коммутаторе или ограничьте количество MAC-адресов на портах с помощью механизма Port Security.
- Проверьте конфигурацию trunk-портов и убедитесь, что разрешены необходимые VLAN.
- Настройте механизм VLAN Access Control, чтобы ограничить доступ к VLAN на портах коммутатора.
- Проанализируйте трафик на портах и при необходимости настройте QoS для приоритезации трафика.
- Настройте механизм Port Security на коммутаторах для ограничения количества MAC-адресов на портах.
- Проверьте конфигурацию новых портов и убедитесь, что они правильно присоединены к VLAN.
- Проверьте конфигурацию EtherChannel и убедитесь, что все порты правильно объединены и настроены.
- Проверьте настройки VMPS сервера и убедитесь, что они соответствуют требованиям сети.